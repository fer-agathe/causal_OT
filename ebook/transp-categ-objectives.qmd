# Objectives {#sec-transp-categ-objectives}


:::{.callout-note}

## Objectives

The chapters of this part of the ebook present the following methods to build counterfactuals for a categorical variable: 

1. Using matching (@sec-transp-categ-matching),
2. Using optimal transport on label-encoded variables (@sec-transp-categ-discrete),
3. Using optimal transport on the simplex (@sec-transp-categ-transport).

:::

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| file: _myfunctions.R
```


```{r}
#| warning: false
#| message: false
#| echo: false
col_group <- c("#00A08A","#F2AD00", "#1b95e0")
col_categ <- c("#56B4E9", "#D55E00", "#CC79A7")
colA <- col_categ[1] ; colB <- col_categ[2] ; colC <- col_categ[3]
colGpe1 <- col_group[2]
colGpe0 <- col_group[1]
```


$$
\definecolor{wongBlack}{RGB}{0,0,0}
\definecolor{wongGold}{RGB}{230, 159, 0}
\definecolor{wongLightBlue}{RGB}{86, 180, 233}
\definecolor{wongGreen}{RGB}{0, 158, 115}
\definecolor{wongYellow}{RGB}{240, 228, 66}
\definecolor{wongBlue}{RGB}{0, 114, 178}
\definecolor{wongOrange}{RGB}{213, 94, 0}
\definecolor{wongPurple}{RGB}{204, 121, 167}
%\definecolor{colA}{RGB}{255, 221, 85}
%\definecolor{colB}{RGB}{148, 78, 223}
%\definecolor{colC}{RGB}{63, 179, 178}
\definecolor{colA}{RGB}{0, 114, 178}
\definecolor{colB}{RGB}{213, 94, 0}
\definecolor{colC}{RGB}{204, 121, 167}
\definecolor{colGpeZero}{RGB}{0,160,138}
\definecolor{colGpeUn}{RGB}{242, 173, 0}
$$


Consider a categorical variables $x \in \{{\color{colA}A}, {\color{colB}B}, {\color{colC}C}\}$, with group-specific distributions. The categorical variable could be, for example, the treatment administered for a disease: `r colorize("A=surgery", colA)`, `r colorize("B=medication", colB)`, `r  colorize("C=no treatment", colC)`. We consider two groups (this could `r colorize("non-Black", colGpe1)`/`r colorize("Black", colGpe0)`, for example). We want to build a **counterfactual category** for each individual from a group to the other. 


Let `r colorize("Group 0", colGpe0)` and `r colorize("Group 1", colGpe1)` represent two subpopulations in which the distribution of $x$ differs. For example, we can have:

- in `r colorize("Group 0", colGpe0)` it is $\boldsymbol{p}_0 = (0.1, 0.5, 0.4)$. 
- in `r colorize("Group 1", colGpe1)`, the category distribution is $\boldsymbol{p}_1 = (0.5, 0.3, 0.2)$.

`r colorize("Group 0", colGpe0)` could be, for example, `r colorize("Black individuals", colGpe0)`, whereas `r colorize("Group 1", colGpe1)` could be `r colorize("individuals who are not Black", colGpe1)`.

The objective is to define, for each individual in `r colorize("Group 0", colGpe0)`, a counterfactual category that reflects the distributional characteristics of `r colorize("Group 1", colGpe1)`. That is, we want to know what would be the medical treatment (`r colorize("surgery", colA)`, `r colorize("medication", colB)`, `r  colorize("no treatment", colC)`) of a `r colorize("Black individual", colGpe0)` that received a given treatment (e.g., "`r colorize("C=no treatment", colC)`) had they been `r colorize("non-Black", colGpe1)`.

To do so, the remainder of this part of the ebook revisits two approaches:

1. Using matching (@sec-transp-categ-matching),
2. Using optimal transport on label-encoded variables (@sec-transp-categ-discrete),
3. Using transport on the simplex (@sec-transp-categ-transport) (the one used in our paper).

